<?xml version="1.0"?>
<Commits>
<Commit category="core">
<Who>johng@apache.org</Who>
<DateCommitted>01/17/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/lib/sql XConnection.java</Modified>
<Log>Fixed second connection problem</Log>
</Commit>
<Commit category="core">
<Who>johng@apache.org</Who>
<DateCommitted>01/17/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/lib/sql SQLDocument.java</Modified>
<Log>Update for new DTM Model</Log>
</Commit>
<Commit category="core">
<Who>johng@apache.org</Who>
<DateCommitted>01/17/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/lib/sql DTMDocument.java</Modified>
<Log>Update for new DTM Model</Log>
</Commit>
<Commit category="core">
<Who>johng@apache.org</Who>
<DateCommitted>01/17/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/lib/sql SQLDocument.java
 DTMDocument.java</Modified>
<Log>Removed Debug</Log>
</Commit>
<Commit category="core">
<Who>jkesselm@apache.org</Who>
<DateCommitted>01/18/2002</DateCommitted>
<Modified>java/src/org/apache/xml/utils FastStringBuffer.java</Modified>
<Log>Whups. There's a possible reentrancy problem when data
 is being serialized from an FSB, thru Sax, back into a new
 chunk of the same FSB; if the append causes a rechunking,
 the serialize loop may break.

 TEMPORARY PATCH; permanant fix to follow. See comments.</Log>
</Commit>
<Commit category="core">
<Who>jkesselm@apache.org</Who>
<DateCommitted>01/18/2002</DateCommitted>
<Modified>java/src/org/apache/xml/utils SuballocatedIntVector.java</Modified>
<Log>&lt;blush&gt;Wrong side of the fencepost...&lt;/blush></Log>
</Commit>
<Commit category="core">
<Who>jkesselm@apache.org</Who>
<DateCommitted>01/23/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/templates ElemTemplate.java
 java/src/org/apache/xalan/transformer TransformerImpl.java
 java/src/org/apache/xml/dtm DTMManager.java
 java/src/org/apache/xml/dtm/ref DTMDefaultBase.java
 DTMManagerDefault.java
 java/src/org/apache/xml/dtm/ref/sax2dtm SAX2DTM.java
 java/src/org/apache/xpath XPathContext.java</Modified>
<Added>java/src/org/apache/xml/dtm/ref/sax2dtm SAX2RTFDTM.java</Added>
<Log>These changes allow us to store multiple Result Tree Fragment (RTF)
 document trees (used when an XSLT variable contains a constructed
 set of nodes) into a single DTM object rather than using a new DTM
 for each RTF. They also permit "tail-pruning" this shared DTM to
 reuse that space as the variables go out of scope.

 The result is a slight performance improvement, and a much more
 significant improvement in storage efficiency. Stylesheets which
 use RTFs heavily should now run in much less memory; in
 one testcase, our "working set" heap size (storage actually in
 use, not counting objects released but not yet GC'd) dropped
 from 12-15MB down to 3-6MB, and heap churn (how quickly
 storage was being allocated and discarded) also reduced
 substantially.

 The code changes needed to support this new scheme are
 surprisingly small. And I believe it may be possible to reduce them
 further, if we're willing to merge the SAX2RTFDTM subclass back
 into its SAX2DTM superclass. I believe that could be done with
 very little adverse impact on other uses of SAX2DTM... but I felt it
 was safer to defer that decision for now.</Log>
</Commit>
<Commit category="xsltc">
<Who>tmiller@apache.org</Who>
<DateCommitted>01/24/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/xsltc/runtime TextOutput.java</Modified>
<Log>bug 1520 fix, escape chars over 0080 instead of 00FF</Log>
</Commit>
<Commit category="xsltc">
<Who>tmiller@apache.org</Who>
<DateCommitted>01/24/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/xsltc/runtime TextOutput.java</Modified>
<Log>bug 1520, adjusted 0080 to 007F in ASCII cutoff</Log>
</Commit>
<Commit category="core">
<Who>mmidy@apache.org</Who>
<DateCommitted>01/25/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/transformer TransformerImpl.java</Modified>
<Log>Bug 5982 and 6022. The variable stack was not being cleared accross 
transforms so that when the transformer is reused, we were using nodesets from 
the previous transform which were using a different DTM. Note that we want keep 
any variables that have been set externally by the user (using 
Transformer.setParameter()).</Log>
</Commit>
<Commit category="core">
<Who>mmidy@apache.org</Who>
<DateCommitted>01/28/2002</DateCommitted>
<Modified>java/src/org/apache/xpath/res XPATHErrorResources.java</Modified>
<Log>bug 4762: Fixed the duplicate error message in XPATH.</Log>
</Commit>
<Commit category="core">
<Who>jkesselm@apache.org</Who>
<DateCommitted>01/28/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/transformer TransformerImpl.java</Modified>
<Log>Bugzilla 4054: Retain previously set output properties when adding new ones.</Log>
</Commit>
<Commit category="core">
<Who>mmidy@apache.org</Who>
<DateCommitted>01/28/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/transformer TransformerImpl.java</Modified>
<Log>Bug 5872. We were using a constructor of TranformerException without the 
locator information. Changed to code to use a locator if info is available.</Log>
</Commit>
<Commit category="core">
<Who>dleslie@apache.org</Who>
<DateCommitted>01/30/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/lib NodeInfo.java</Modified>
<Log>Changed "system id" to "public identifier" in javadoc
 comments for publicId() methods.</Log>
</Commit>
<Commit category="core">
<Who>jkesselm@apache.org</Who>
<DateCommitted>01/30/2002</DateCommitted>
<Modified>java/src/org/apache/xml/dtm/ref/sax2dtm SAX2DTM.java</Modified>
<Log>Bugzilla 2617, part 1: Construct the data structures and access them 
correctly.
 Ignore too-late-to-be-safe requests to enable this feature.

 This doesn't resolve how to rewrite higher-level code so it makes the
 request early enough to be useful.</Log>
</Commit>
<Commit category="core">
<Who>mmidy@apache.org</Who>
<DateCommitted>01/30/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/templates StylesheetComposed.java
 StylesheetRoot.java TemplateList.java
 java/src/org/apache/xalan/transformer TransformerImpl.java</Modified>
<Log>Bug 4987: Changed Apply-imports logic to only apply imports to stylesheets 
that are direct imports. The logic for includes has not changed, we will 
apply-imports to any stylesheet that is imported as a result of an inclusion. 
Note: had to change the order when includes and imports are recomposed!</Log>
</Commit>
<Commit category="core">
<Who>jkesselm@apache.org</Who>
<DateCommitted>01/31/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/lib NodeInfo.java
 java/src/org/apache/xalan/processor
 TransformerFactoryImpl.java
 java/src/org/apache/xalan/transformer TransformerImpl.java
 java/src/org/apache/xalan/xslt Process.java
 java/src/org/apache/xml/dtm/ref DTMManagerDefault.java
 java/src/org/apache/xml/dtm/ref/sax2dtm SAX2DTM.java
 SAX2RTFDTM.java
 java/src/org/apache/xml/utils DefaultErrorHandler.java</Modified>
<Log>Bugzilla 2617: Recreated missing code, changed controls to ensure
 that this mode gets set early enough to be useful and can't be broken
 by being turned on and off during execution.

 NOTE: Current implementation relies on a global static flag in
 TransformerFactoryImpl. We need to rearchitect our APIs slightly
 so configuration hints of this kind can be passed down from top-level
 objects to the back-end code more elegantly. Revisit in future
 releases.</Log>
</Commit>
<Commit category="core">
<Who>mmidy@apache.org</Who>
<DateCommitted>01/31/2002</DateCommitted>
<Modified>java/src/org/apache/xalan/templates ElemApplyTemplates.java</Modified>
<Log>Bug 5505: Need to resolve params before we do anything else, so move code 
that does that above the code that sets up the different node stacks.</Log>
</Commit>
</Commits>
